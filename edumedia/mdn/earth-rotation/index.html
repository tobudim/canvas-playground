<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Earth rotation</title>
  </head>
  <body>
    <canvas id="canvas" width="600" height="600"></canvas>
  </body>
  <script>
    const sun = new Image();
    const moon = new Image();
    const earth = new Image();
    function init() {
      sun.src = "https://mdn.mozillademos.org/files/1456/Canvas_sun.png";
      moon.src = "https://mdn.mozillademos.org/files/1443/Canvas_moon.png";
      earth.src = "https://mdn.mozillademos.org/files/1429/Canvas_earth.png";
      window.requestAnimationFrame(draw);
    }

    function draw() {
      const context = document.getElementById("canvas").getContext("2d");
      context.globalCompositeOperation = "destination-over";
      context.clearRect(0, 0, 600, 600);

      context.fillStyle = "rgba(0,0,0,0.4)";
      context.strokeStyle = "rgba(0, 153, 255, 0.4)";
      context.save();
      context.translate(300, 300);

      // Earth
      const time = new Date();
      context.rotate(
        ((2 * Math.PI) / 60) * time.getSeconds() +
          ((2 * Math.PI) / 60000) * time.getMilliseconds()
      );
      context.translate(105, 0);
      context.fillRect(0, -12, 50, 24);
      context.drawImage(earth, -12, -12);

      // Moon
      context.save();
      context.rotate(
        ((2 * Math.PI) / 6) * time.getSeconds() +
          ((2 * Math.PI) / 6000) * time.getMilliseconds()
      );
      context.translate(25, 0);
      context.drawImage(moon, -7, -7);
      context.restore();

      context.restore();

      context.beginPath();
      context.arc(300, 300, 105, 0, Math.PI * 2, false);
      context.stroke();

      context.drawImage(sun, 0, 0, 600, 600);

      window.requestAnimationFrame(draw);
    }

    init();
  </script>
</html>
